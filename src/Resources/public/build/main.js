(()=>{var e={470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.id=e,this.create()}create(){this.template=document.createElement("div"),this.template.id=this.id}appendTo(e){e instanceof HTMLElement?e.append(this.template):document.querySelector(e).append(this.template)}content(e){this.template.innerHTML=e}hide(){this.template.hidden=!0}show(){this.template.hidden=!1}addClass(...e){this.template.classList.add(...e)}removeClass(...e){this.template.classList.remove(...e)}}},147:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderMode=void 0;const i=s(n(470));var r;!function(e){e.INLINE="inlined",e.COVER="cover"}(r=t.LoaderMode||(t.LoaderMode={}));class o extends i.default{constructor(){o.loaderId++,super("loader"+o.loaderId),this.addClass("loader"),this.spinnerContainer=document.createElement("div"),this.spinnerContainer.classList.add("spinner"),this.spinnerContainer.innerHTML="\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        ",this.textContainer=document.createElement("p"),this.textContainer.classList.add("text"),this.template.append(this.spinnerContainer),this.template.append(this.textContainer),this.hide(),this.play(),this.setMode(r.INLINE)}setMode(e){this.removeClass(r.INLINE,r.COVER),this.addClass(e)}setText(e){this.textContainer.innerHTML=e}hide(){this.setText(""),super.hide()}play(){this.addClass("play")}pause(){this.removeClass("play")}}t.default=o,o.loaderId=0},831:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(470)),l=r(n(147));class d extends a.default{constructor(e){super(e),this.steps=[],this.hide(),this.insideContainer=document.createElement("div"),this.insideContainer.classList.add("inside"),this.template.append(this.insideContainer),this.stepContainer=document.createElement("div"),this.stepContainer.id="steps",this.insideContainer.append(this.stepContainer),this.loaderElement=new l.default,this.loaderElement.setMode(l.LoaderMode.COVER),this.loaderElement.appendTo(this.insideContainer)}addSteps(...e){for(const t of e)t.addModal(this),this.steps.push(t),t.appendTo(this.stepContainer)}open(e=0){this.currentIndex=e,this.currentStep=this.steps[this.currentIndex],this.closeSteps(),this.currentStep.show(),this.show()}loader(e=!0,t){e?this.loaderElement.show():this.loaderElement.hide(),t?this.loaderElement.setText(t):this.loaderElement.setText("")}next(){this.open(++this.currentIndex)}prev(){this.open(--this.currentIndex)}closeSteps(){for(const e of this.steps)e.hide()}}t.default=d},415:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(470));class r extends i.default{constructor(){super("step"+r.stepId++),this.lockedForm=!1,this.hide()}addModal(e){this.modal=e}setConfig(e){this.config=e}getRoute(e){var t;if(!(null===(t=this.config)||void 0===t?void 0:t.routes[e]))throw new Error(`No route could be found for the name ${e}`);return this.config.routes[e]}getAttribute(e,t){var n;return(null===(n=this.config)||void 0===n?void 0:n.attributes[e])?this.config.attributes[e]:t||""}show(){super.content(this.getTemplate()),this.defaultEvents(),this.events(),super.show()}defaultEvents(){var e,t,n,s;null===(e=this.template.querySelector("[data-close]"))||void 0===e||e.addEventListener("click",(()=>this.modal.hide())),null===(t=this.template.querySelector("[data-prev]"))||void 0===t||t.addEventListener("click",(()=>this.modal.prev())),null===(n=this.template.querySelector("[data-next]"))||void 0===n||n.addEventListener("click",(()=>this.modal.next())),null===(s=this.template.querySelector("form"))||void 0===s||s.addEventListener("submit",(e=>this.formSubmit(e)))}error(e){if(this.lockedForm=!1,null==e?void 0:e.fields){const t=this.template.querySelector("form");for(const n in e.fields){if(t[n].parentElement.classList.add("error"),t[n].nextElementSibling)t[n].nextElementSibling.innerHTML=e.fields[n];else{const s=document.createElement("p");s.innerHTML=e.fields[n],t[n].after(s)}t[n].addEventListener("input",(()=>{t[n].parentElement.classList.remove("error")}),{once:!0})}}}formSubmit(e){e.preventDefault();const t=e.target,n=new FormData(t);t.checkValidity()?this.lockedForm||(this.lockedForm=!0,this.submit(t,n,e)):t.reportValidity()}events(){}submit(e,t,n){}}t.default=r,r.stepId=0},537:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(831)),r=n(575),o=s(n(969));t.default=class{constructor(e){this.setLocale(e),this.modal=new i.default("installer"),this.modal.addSteps(new o.default),this.modal.appendTo("body")}setLocale(e){this.locale=e,(0,r.setLanguage)(e)}open(){this.modal.open()}}},729:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(298)),r=n(342);class o extends i.default{getTemplate(){return`\n            <div data-loader></div>\n            <div class="content">\n                <div class="title">${this.config.attributes.title}</div>\n                <p>${this.config.attributes.description}</p>\n            </div>\n        `}process(){(0,r.call)(this.getRoute("process")).then((e=>{console.log(e),e.error?this.reject(e):this.resolve()})).catch((e=>this.reject(e)))}reject(e){super.reject(e),this.manager.exit()}}t.default=o},298:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(470)),r=s(n(147));class o extends i.default{constructor(e,t){super("process"+o.processId++),this.container=e,this.config=t,this.addClass("process-step","not-active"),this.content(this.getTemplate()),this.appendTo(this.container),this.errorContainer=document.createElement("div"),this.errorContainer.classList.add("errors"),this.template.append(this.errorContainer);const n=this.template.querySelector("[data-loader]");n&&(this.loader=new r.default,this.loader.show(),this.loader.pause(),this.loader.appendTo(n)),this.mount()}addManager(e){this.manager=e}getRoute(e){var t;if(!(null===(t=this.config)||void 0===t?void 0:t.routes[e]))throw new Error(`No route could be found for the name ${e}`);return this.config.routes[e]}getAttribute(e,t){var n;return(null===(n=this.config)||void 0===n?void 0:n.attributes[e])?this.config.attributes[e]:t||""}reset(){var e,t,n;this.addClass("not-active"),null===(e=this.loader)||void 0===e||e.pause(),null===(t=this.loader)||void 0===t||t.removeClass("done","fail","pause"),null===(n=this.template.querySelector("div.errors"))||void 0===n||n.remove()}start(){var e;null===(e=this.loader)||void 0===e||e.play(),this.removeClass("not-active"),this.process()}resolve(){var e,t;null===(e=this.loader)||void 0===e||e.pause(),null===(t=this.loader)||void 0===t||t.addClass("done"),this.manager.next()}reject(e){var t,n;null===(t=this.loader)||void 0===t||t.pause(),null===(n=this.loader)||void 0===n||n.addClass("fail"),this.error(e)}error(e){if(null==e?void 0:e.messages)for(const t of e.messages)this.addErrorParagraph(t);(null==e?void 0:e.message)&&this.addErrorParagraph(e.message)}addErrorParagraph(e){const t=document.createElement("p");t.innerText=e,this.errorContainer.append(t)}pause(){var e,t;null===(e=this.loader)||void 0===e||e.pause(),null===(t=this.loader)||void 0===t||t.addClass("pause")}mount(){}}t.default=o,o.processId=0},613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.processes=[],this.onFinish=()=>{}}addProcess(...e){for(const t of e)t.addManager(this),this.processes.push(t);return this}start(e=0){e>=this.processes.length?this.exit():(this.currentIndex=e,this.currentProcess=this.processes[this.currentIndex],this.currentProcess.start())}exit(){this.onFinish.call(this)}next(){this.start(++this.currentIndex)}finish(e){return this.onFinish=e,this}reset(){this.currentIndex=0;for(const e of this.processes)e.reset()}}},671:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static set(e,t){n.state[e]=t}static get(e){return n.state[e]}static clear(e){e?delete n.state[e]:n.state={}}}t.default=n,n.state={}},969:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(575),r=n(342),o=s(n(415)),a=n(959);class l extends o.default{getTemplate(){return`\n            <h2>${(0,i.i18n)("license_connector.headline")}</h2>\n            <form id="license-connector-form" autocomplete="off">\n                <div class="license-conntector-container"></div>\n            </form>\n        `}events(){this.modal.loader(!0,(0,i.i18n)("license_connector.load.connector")),(0,r.call)("/contao/installer/license_connectors",{},!0).then((e=>{if(this.modal.loader(!1),e.error)super.error(e);else if(1!==e.license_connectors.length)for(const t of e.license_connectors)this.createLicenseConnectorElement(t);else this.useLicenseConnector(e.license_connectors[0])})).catch((()=>{console.log("error catch")}))}useLicenseConnector(e){this.modal.loader(!0,(0,i.i18n)("license_connector.load.steps"));for(const t of e.steps){const e=(0,a.createInstance)(t.name);e.setConfig(t),this.modal.addSteps(e)}this.modal.loader(!1),this.modal.next()}createLicenseConnectorElement(e){const t=e.config.image?`<img src="${e.config.image}" alt="${e.config.title}"/>`:"",n=document.createElement("div");n.classList.add("license-connector"),n.addEventListener("click",(t=>this.useLicenseConnector(e))),n.innerHTML=`\n            <div class="image">${t}</div>\n            <div class="content">\n                <div class="title">${e.config.title}</div>\n                <div class="description">${e.config.description}</div>\n            </div>\n        `,this.template.querySelector(".license-connector-container").append(n)}}t.default=l},673:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(671)),r=n(342),o=n(575),a=s(n(415));class l extends a.default{getTemplate(){return`\n            <h2>${this.getAttribute("title",(0,o.i18n)("license.headline"))}</h2>\n            <p>${this.getAttribute("description",(0,o.i18n)("license.description"))}</p>\n            <form id="license-form" autocomplete="off">\n                <div class="widget">\n                    <label for="license">${(0,o.i18n)("license.form.label.license")}</label>\n                    <input type="text" name="license" id="license" placeholder="XXXX-XXXX-XXXX-XXXX-XXXX" autocomplete="off" required/>\n                </div>\n            </form>\n            <div class="actions">\n                <button data-close>${(0,o.i18n)("actions.close")}</button>\n                <button type="submit" form="license-form" class="check primary">${(0,o.i18n)("license.actions.next")}</button>\n            </div>\n        `}submit(e,t){i.default.set("license",t.get("license")),this.modal.loader(!0,(0,o.i18n)("license.loading")),(0,r.call)(this.getRoute("license"),{license:t.get("license")}).then((t=>{this.modal.loader(!1),t.error?super.error(t):(i.default.set("product",t),e.reset(),this.lockedForm=!1,this.modal.next())})).catch((()=>{console.log("error catch"),this.lockedForm=!1}))}}t.default=l},946:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(575),r=s(n(415)),o=s(n(613)),a=n(959);class l extends r.default{getTemplate(){return`\n            <h2>${(0,i.i18n)("install.headline")}</h2>\n            <div class="process"></div>\n            <div class="actions">\n                <button data-close disabled>${(0,i.i18n)("actions.close")}</button>\n                <button class="add primary" disabled>${(0,i.i18n)("install.actions.add")}</button>\n            </div>\n        `}events(){const e=this.template.querySelector(".process"),t=this.template.querySelector("button.add"),n=this.template.querySelector("[data-close]"),s=()=>{t.disabled=!0,n.disabled=!0,this.manager.reset()};this.manager=new o.default;for(const t of this.config.attributes.processes){const n=(0,a.createInstance)(t.name,e,t);this.manager.addProcess(n)}this.manager.finish((()=>{t.disabled=!1,n.disabled=!1,n.addEventListener("click",(()=>{s(),this.modal.hide()})),t.addEventListener("click",(()=>{s(),this.modal.open(0)}))})),this.manager.start()}}t.default=l},265:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(415)),r=s(n(671)),o=n(575);class a extends i.default{getTemplate(){const e=r.default.get("product");let t="";for(const n of e.products)t+=`\n                 <div class="product">\n                    <div class="image">\n                        ${n.image?`<img src="${n.image}" alt/>`:""}\n                    </div>\n                    <div class="content">\n                        <div class="title">${n.name}</div>\n                        <div class="description">${n.description}</div>\n                        <div class="version">${n.version}</div>\n                    </div>\n                </div>\n            `;return`\n            <h2>${(0,o.i18n)("product.headline")}</h2>\n            <div class="products">\n                ${t}\n            </div>\n            <div class="actions">\n                <button data-prev>${(0,o.i18n)("actions.back")}</button>\n                <button data-next class="primary">${(0,o.i18n)("product.actions.install")}</button>\n            </div>\n        `}}t.default=a},779:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultProcess=t.ProcessStep=t.ProductStep=t.LicenseStep=void 0;const i=s(n(673));t.LicenseStep=i.default;const r=s(n(265));t.ProductStep=r.default;const o=s(n(946));t.ProcessStep=o.default;const a=s(n(729));t.DefaultProcess=a.default},959:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createInstance=void 0;const o=r(n(779));t.createInstance=function(e,...t){return new o[e](...t)}},919:e=>{e.exports={"actions.close":"Schließen","actions.back":"Zurück","license_connector.headline":"Bitte wählen Sie einen Produkttypen","license_connector.load.connector":"Informationen werden abgerufen","license_connector.load.steps":"Masken werden geladen","license.headline":"Lizenzüberprüfung","license.description":"Geben Sie hier Ihren Lizenzschlüssel für das zu installierende Produkt an. Im nächsten Schritt können Sie die zugehörigen Produkte sichten sowie installieren oder updaten.","license.form.label.license":"Produktlizenz","license.actions.next":"Produktlizenz überprüfen","license.loading":"Produkte werden abgerufen","product.headline":"Ihre Produkte","product.actions.install":"Produkt installieren","install.headline":"Installation wird durchgeführt","install.actions.add":"Weiteres Produkt registrieren"}},713:e=>{e.exports={"actions.close":"Close","actions.back":"Back","license_connector.headline":"Please select a product type","license_connector.load.connector":"Information is retrieved","license_connector.load.steps":"Masks are loaded","license.headline":"License verification","license.description":"Enter your license key for the product to be installed here. In the next step you can view the associated products and install or update them.","license.form.label.license":"Product license","license.actions.next":"Check license","license.loading":"Products are retrieved","product.headline":"Your products","product.actions.install":"Install product","install.headline":"Installation","install.actions.add":"Register more products"}},575:(e,t,n)=>{"use strict";n.r(t),n.d(t,{i18n:()=>o,setLanguage:()=>r});const s={en:n(713),de:n(919)};let i=navigator.language.replace(/\-.+/i,"");function r(e){i=e}function o(e){return(s[i]||s.en)[e]||e}},342:(e,t,n)=>{"use strict";async function s(e,t={},n=!1){const s={method:"POST",cache:n?"force-cache":"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(e,s).then((e=>e.json())).then((e=>e))}n.r(t),n.d(t,{call:()=>s})}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(537),t=n.n(e);document.addEventListener("DOMContentLoaded",(()=>{const e=new(t())("de");document.getElementById("product-installer")?.addEventListener("click",(t=>{t.preventDefault(),e.open()}))}))})()})();